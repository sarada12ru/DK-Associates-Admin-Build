"use strict";(self.webpackChunkDK_Associates_Admin=self.webpackChunkDK_Associates_Admin||[]).push([[968],{1968:(O,u,s)=>{s.r(u),s.d(u,{DocumentsModule:()=>F});var d=s(9808),r=s(4301),e=s(1223),p=s(9306),l=s(344),m=s(2509),g=s(9710),h=s(8953);function v(n,c){1&n&&e._UZ(0,"app-loader")}function Z(n,c){if(1&n&&(e.TgZ(0,"h3",17),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.errMessage)}}function D(n,c){if(1&n&&(e.TgZ(0,"h3",18),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.successMessage)}}let A=(()=>{class n{constructor(t,o,i){this.apiService=t,this.appService=o,this.router=i}ngOnInit(){}uploadDoc(t){this.errMessage=!1,this.successMessage=!1;let o=t.target.files;this.uploadedFile=!!(o&&o.length>0)&&o[0]}upload(){const t=new FormData;t.append("doc",this.uploadedFile),this.apiService.uploadDoc(t).subscribe(o=>{o&&o.success?this.successMessage="File Uploaded Successfully !":o&&!o.success&&(this.errMessage=o.message)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.s),e.Y36(l.z),e.Y36(r.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-document"]],decls:27,vars:3,consts:[[4,"ngIf"],[1,"content-wrapper"],[1,"content-header"],[1,"breadcrumb"],[1,"fa","fa-user"],[1,"content"],[1,"row"],[1,"col-xs-12"],[1,"box"],[1,"box-body"],[2,"height","85vh","overflow","auto"],[1,"form-group"],["class","err-message",4,"ngIf"],["class","success-message",4,"ngIf"],["for",""],["type","file","accept",".csv",1,"form-control",3,"change"],[1,"btn","btn-primary",3,"click"],[1,"err-message"],[1,"success-message"]],template:function(t,o){1&t&&(e.YNc(0,v,1,0,"app-loader",0),e._UZ(1,"app-header")(2,"app-left-nav"),e.TgZ(3,"div",1)(4,"section",2)(5,"h1"),e._uU(6," Add Document "),e.qZA(),e.TgZ(7,"ol",3)(8,"li"),e._UZ(9,"i",4),e._uU(10," Add Document"),e.qZA()()(),e.TgZ(11,"section",5)(12,"div",6)(13,"div",7)(14,"div",8)(15,"div",9)(16,"div",10)(17,"div",11),e.YNc(18,Z,2,1,"h3",12),e.YNc(19,D,2,1,"h3",13),e.qZA(),e.TgZ(20,"div",11)(21,"label",14),e._uU(22," Document "),e.qZA(),e.TgZ(23,"input",15),e.NdJ("change",function(a){return o.uploadDoc(a)}),e.qZA()(),e.TgZ(24,"div",11)(25,"button",16),e.NdJ("click",function(){return o.upload()}),e._uU(26,"Upload"),e.qZA()()()()()()()()()),2&t&&(e.Q6J("ngIf",o.appService.loader),e.xp6(18),e.Q6J("ngIf",o.errMessage),e.xp6(1),e.Q6J("ngIf",o.successMessage))},directives:[d.O5,m.R,g.G,h.J],styles:[""]}),n})();var T=s(7579),U=s(4766),x=s(5226),b=s.n(x),C=s(5415);function _(n,c){1&n&&(e.TgZ(0,"span"),e._uU(1," Active "),e.qZA())}function y(n,c){1&n&&(e.TgZ(0,"span"),e._uU(1," Inactive "),e.qZA())}function S(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"a",14),e._uU(9,"Download"),e.qZA()(),e.TgZ(10,"td"),e.YNc(11,_,2,0,"span",15),e.YNc(12,y,2,0,"span",15),e.qZA(),e.TgZ(13,"td")(14,"a",16),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().removeDocument(a.id)}),e._uU(15,"Delete"),e.qZA()()()}if(2&n){const t=c.$implicit;e.xp6(2),e.hij(" ",t.docName," "),e.xp6(2),e.hij(" ",t.uploadDate," "),e.xp6(2),e.hij(" ",t.expiredDate," "),e.xp6(2),e.Q6J("href",t.downloadURL,e.LSH),e.xp6(3),e.Q6J("ngIf",1==t.isActive),e.xp6(1),e.Q6J("ngIf",0==t.isActive)}}const N=[{path:"",component:(()=>{class n{constructor(t,o,i){this.apiService=t,this.appService=o,this.router=i,this.documents=[],this.dtOptions={},this.dtTrigger=new T.x,this.baseUrl=U.N.baseUrl}ngOnInit(){this.dtOptions={pagingType:"full_numbers",pageLength:5,processing:!0},this.appService.loader=!0,this.apiService.getAllDocuments().subscribe(t=>{this.appService.loader=!1,t&&t.success?(this.documents=t.docs.map(o=>(o.downloadURL=this.baseUrl+"docs/"+o.docName,o)),this.dtTrigger.next(this.documents)):t&&!t.success&&(this.documents=[],this.dtTrigger.next(this.documents))})}addNew(){this.router.navigate(["/documents/add"])}ngOnDestroy(){this.dtTrigger.unsubscribe()}removeDocument(t){this.appService.loader=!0,this.apiService.deleteDocument(t).subscribe(o=>{if(this.appService.loader=!1,o&&o.success){let i=this.documents.findIndex(a=>a.id===t);this.documents.splice(i,1)}else o&&!o.success&&b().fire("Failed to delete document !")})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.s),e.Y36(l.z),e.Y36(r.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-documents"]],decls:37,vars:3,consts:[[1,"content-wrapper"],[1,"content-header"],[1,"breadcrumb"],[1,"fa","fa-user"],[1,"content"],[1,"row"],[1,"col-xs-12"],[1,"box"],[1,"box-body"],[2,"text-align","right","margin","10px 0"],[1,"btn","btn-primary",3,"click"],[2,"height","85vh","overflow","auto"],["id","example1","datatable","",1,"table","table-bordered","table-striped","text-center",3,"dtTrigger","dtOptions"],[4,"ngFor","ngForOf"],["download","",1,"btn","btn-success",3,"href"],[4,"ngIf"],[1,"btn","btn-danger",3,"click"]],template:function(t,o){1&t&&(e._UZ(0,"app-loader")(1,"app-header")(2,"app-left-nav"),e.TgZ(3,"div",0)(4,"section",1)(5,"h1"),e._uU(6," Document List "),e.qZA(),e.TgZ(7,"ol",2)(8,"li"),e._UZ(9,"i",3),e._uU(10," Document List"),e.qZA()()(),e.TgZ(11,"section",4)(12,"div",5)(13,"div",6)(14,"div",7)(15,"div",8)(16,"div",9)(17,"button",10),e.NdJ("click",function(){return o.addNew()}),e._uU(18,"Add New"),e.qZA()(),e.TgZ(19,"div",11)(20,"table",12)(21,"thead")(22,"tr")(23,"th"),e._uU(24,"Name"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Upload Date"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Expired Date"),e.qZA(),e.TgZ(29,"th"),e._uU(30,"Download"),e.qZA(),e.TgZ(31,"th"),e._uU(32,"Status"),e.qZA(),e.TgZ(33,"th"),e._uU(34,"Action"),e.qZA()()(),e.TgZ(35,"tbody"),e.YNc(36,S,16,6,"tr",13),e.qZA()()()()()()()()()),2&t&&(e.xp6(20),e.Q6J("dtTrigger",o.dtTrigger)("dtOptions",o.dtOptions),e.xp6(16),e.Q6J("ngForOf",o.documents))},directives:[m.R,g.G,h.J,C.G,d.sg,d.O5],styles:[""]}),n})()},{path:"add",component:A}];let J=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[r.Bz.forChild(N)],r.Bz]}),n})();var M=s(5349),f=s(2382);let F=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,J,M.m,f.UX,f.u5]]}),n})()}}]);