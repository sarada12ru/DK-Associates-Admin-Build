"use strict";(self.webpackChunkDK_Associates_Admin=self.webpackChunkDK_Associates_Admin||[]).push([[906],{6906:(H,d,r)=>{r.r(d),r.d(d,{UsersModule:()=>R});var g=r(9808),u=r(4301),x=r(5415),T=r(7579),b=r(4766),C=r(5226),I=r.n(C),t=r(1223),h=r(344),m=r(9306),f=r(2509),_=r(9710),Z=r(8953),l=r(2382),A=r(9966);function q(s,n){if(1&s&&(t.TgZ(0,"h3",23),t._uU(1),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Oqu(e.errMessage)}}function S(s,n){if(1&s&&(t.TgZ(0,"h3",24),t._uU(1),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Oqu(e.successMessage)}}function N(s,n){if(1&s&&t._UZ(0,"img",37),2&s){const e=t.oxw().$implicit;t.Q6J("src",e.profileImage,t.LSH)}}function M(s,n){1&s&&t._UZ(0,"img",38)}function O(s,n){if(1&s&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&s){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.onlineStatus," ")}}function y(s,n){if(1&s&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&s){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.onlineStatus," ")}}function J(s,n){1&s&&(t.TgZ(0,"span"),t._uU(1," Active "),t.qZA())}function w(s,n){1&s&&(t.TgZ(0,"span"),t._uU(1," Inactive "),t.qZA())}function L(s,n){1&s&&(t.TgZ(0,"span"),t._uU(1," Blocked "),t.qZA())}function Y(s,n){1&s&&(t.TgZ(0,"span"),t._uU(1," Left "),t.qZA())}function j(s,n){1&s&&(t.TgZ(0,"span"),t._uU(1," Off-Time "),t.qZA())}function Q(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t.YNc(4,N,1,1,"img",25),t.YNc(5,M,1,0,"img",26),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.YNc(16,O,2,1,"td",27),t.YNc(17,y,2,1,"td",28),t.TgZ(18,"td"),t.YNc(19,J,2,0,"span",29),t.YNc(20,w,2,0,"span",29),t.YNc(21,L,2,0,"span",29),t.YNc(22,Y,2,0,"span",29),t.YNc(23,j,2,0,"span",29),t.qZA(),t.TgZ(24,"td")(25,"select",30),t.NdJ("change",function(a){const c=t.CHM(e).$implicit;return t.oxw().changeStatus(a,c.id)}),t.TgZ(26,"option",31),t._uU(27,"Inactive"),t.qZA(),t.TgZ(28,"option",32),t._uU(29,"Active"),t.qZA(),t.TgZ(30,"option",33),t._uU(31,"Blocked"),t.qZA(),t.TgZ(32,"option",34),t._uU(33,"Left"),t.qZA(),t.TgZ(34,"option",35),t._uU(35,"Off-Time"),t.qZA()()(),t.TgZ(36,"td")(37,"button",36),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw().viewActivities(o.id)}),t._uU(38,"View Activities"),t.qZA()()()}if(2&s){const e=n.$implicit;t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Q6J("ngIf",e.profileImage),t.xp6(1),t.Q6J("ngIf",!e.profileImage),t.xp6(2),t.hij(" ",e.firstName," "),t.xp6(2),t.hij(" ",e.lastName," "),t.xp6(2),t.hij(" ",e.email," "),t.xp6(2),t.hij(" ",e.mobile," "),t.xp6(2),t.hij(" ",e.aadhaar," "),t.xp6(1),t.Q6J("ngIf","online"==e.onlineStatus),t.xp6(1),t.Q6J("ngIf","offline"==e.onlineStatus),t.xp6(2),t.Q6J("ngIf",1==e.status),t.xp6(1),t.Q6J("ngIf",0==e.status),t.xp6(1),t.Q6J("ngIf",2==e.status),t.xp6(1),t.Q6J("ngIf",3==e.status),t.xp6(1),t.Q6J("ngIf",4==e.status),t.xp6(2),t.Q6J("value",e.status),t.xp6(1),t.Q6J("disabled",!0),t.xp6(2),t.Q6J("disabled",3==e.status),t.xp6(2),t.Q6J("disabled",3==e.status),t.xp6(2),t.Q6J("disabled",3==e.status),t.xp6(2),t.Q6J("disabled",3==e.status)}}const P=function(s,n,e){return{itemsPerPage:s,currentPage:n,totalItems:e}};function B(s,n){if(1&s&&(t.TgZ(0,"h3",15),t._uU(1),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Oqu(e.errMessage)}}function k(s,n){if(1&s&&(t.TgZ(0,"h3",16),t._uU(1),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Oqu(e.successMessage)}}function V(s,n){if(1&s&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA()()),2&s){const e=n.$implicit;t.xp6(2),t.hij(" ",e.id," "),t.xp6(2),t.hij(" ",e.customerName," "),t.xp6(2),t.hij(" ",e.vehicleNo," "),t.xp6(2),t.hij(" ",e.financeName," "),t.xp6(2),t.hij(" ",e.customerMobile," "),t.xp6(2),t.hij(" ",e.searchDate," "),t.xp6(2),t.hij(" ",e.messages," ")}}const z=[{path:"",component:(()=>{class s{constructor(e,i,a){this.appService=e,this.apiService=i,this.router=a,this.users=[],this.baseUrl=b.N.baseUrl,this.dtOptions={},this.dtTrigger=new T.x,this.limit=10,this.pageNo=1,this.totalItems=0}ngOnInit(){this.getUsers(this.limit,this.pageNo)}getUsers(e,i){this.reqData={userClauses:{},sortingClauses:["id","DESC"],limit:e,page:i},this.searchStr&&Object.assign(this.reqData,{searchStr:this.searchStr}),this.appService.loader=!0,this.apiService.getAllUsers(this.reqData).subscribe(a=>{this.appService.loader=!1,a&&a.success?(this.users=a.users.map(o=>Object.assign(Object.assign({},o),{onlineStatus:o.lastOnline&&Math.floor(Date.now()/1e3)<=o.lastOnline+120?"online":"offline",profileImage:o.profileImage?this.baseUrl+"profile/"+o.profileImage:o.profileImage})),this.totalItems=a.totalCount):a&&!a.success&&(this.users=[])})}onPageChange(e){this.pageNo=e,this.getUsers(this.limit,this.pageNo)}userDetails(e){this.router.navigate([`/users/details/${e}`])}changeStatus(e,i){let c,a=e.target.value;3==a&&(c="Once status changed to left. You can't revet it !"),I().fire({title:"Do you want to update status of this user ?",showDenyButton:!0,confirmButtonText:"Update",denyButtonText:"Don't save",text:c}).then(U=>{U.isConfirmed&&this.apiService.changeStatus(Object.assign({},{status:e.target.value,otherUser:!0,id:i})).subscribe(p=>{p&&p.success?(this.successMessage=p.message,this.users.filter(v=>{v.id===i&&(v.status=a)})):p&&!p.success&&(this.errMessage=p.message)},p=>{this.errMessage=p.message},()=>{})})}ngOnDestroy(){this.dtTrigger.unsubscribe()}filterStatus(e){this.dtElement.dtInstance.then(o=>{o.destroy()}),this.users=[],this.dtOptions={pagingType:"full_numbers",pageLength:5,processing:!0};let a={userClauses:{status:e.target.value},sortingClauses:["id","DESC"]};this.appService.loader=!0,this.apiService.getAllUsers(a).subscribe(o=>{this.appService.loader=!1,o&&o.success?(this.users=o.users.map(c=>Object.assign(Object.assign({},c),{profileImage:c.profileImage?this.baseUrl+"profile/"+c.profileImage:c.profileImage})),this.dtTrigger.next(this.users)):o&&!o.success&&(this.users=[],this.dtTrigger.next(this.users))})}updateUserStatus(e){this.apiService.updateUserStatus(e).subscribe(i=>{i&&i.success?this.successMessage=i.message:i&&!i.success&&(this.errMessage=i.message)})}searchUser(){this.getUsers(this.limit,1)}viewActivities(e){this.router.navigate(["/users/activities",e])}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(h.z),t.Y36(m.s),t.Y36(u.F0))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-app-user-list"]],viewQuery:function(e,i){if(1&e&&t.Gf(x.G,5),2&e){let a;t.iGM(a=t.CRH())&&(i.dtElement=a.first)}},decls:56,vars:11,consts:[[1,"content-wrapper"],[1,"content-header"],[1,"breadcrumb"],[1,"fa","fa-user"],[1,"content"],[1,"row"],[1,"col-xs-12"],[1,"box"],[1,"box-body"],[2,"height","85vh","overflow","auto","text-align","right"],[1,"form-group"],["class","err-message",4,"ngIf"],["class","success-message",4,"ngIf"],[2,"text-align","right","margin-bottom","10px"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-primary",2,"margin-left","2px",3,"click"],[2,"display","flex","justify-content","flex-end","margin-bottom","10px"],["type","text","name","","id","","placeholder","Search By First Name / Last Name / Phone / Email",2,"width","35%",3,"ngModel","ngModelChange"],[1,"btn","btn-success",2,"margin-left","10px",3,"click"],["id","example1",1,"table","table-bordered","table-striped","text-center"],["colspan","2"],[4,"ngFor","ngForOf"],[1,"pagi",3,"pageChange"],[1,"err-message"],[1,"success-message"],["alt","Profile photo not available !","style","width: 80px;",3,"src",4,"ngIf"],["src","assets/img/user-profile.png","alt","Profile photo not available !","style","width: 80px;",4,"ngIf"],["style","color: #00cd00",4,"ngIf"],["style","color: #ce083a",4,"ngIf"],[4,"ngIf"],[3,"value","change"],["value","0",3,"disabled"],["value","1",3,"disabled"],["value","2",3,"disabled"],["value","3",3,"disabled"],["value","4",3,"disabled"],[1,"btn","btn-secondary",3,"click"],["alt","Profile photo not available !",2,"width","80px",3,"src"],["src","assets/img/user-profile.png","alt","Profile photo not available !",2,"width","80px"],[2,"color","#00cd00"],[2,"color","#ce083a"]],template:function(e,i){1&e&&(t._UZ(0,"app-loader")(1,"app-header")(2,"app-left-nav"),t.TgZ(3,"div",0)(4,"section",1)(5,"h1"),t._uU(6," Users List "),t.qZA(),t.TgZ(7,"ol",2)(8,"li"),t._UZ(9,"i",3),t._uU(10," Users List"),t.qZA()()(),t.TgZ(11,"section",4)(12,"div",5)(13,"div",6)(14,"div",7)(15,"div",8)(16,"div",9)(17,"div",10),t.YNc(18,q,2,1,"h3",11),t.YNc(19,S,2,1,"h3",12),t.qZA(),t.TgZ(20,"div",13)(21,"button",14),t.NdJ("click",function(){return i.updateUserStatus(4)}),t._uU(22,"Update Status to Off-Time"),t.qZA(),t.TgZ(23,"button",15),t.NdJ("click",function(){return i.updateUserStatus(1)}),t._uU(24,"Update Status to Working Hours"),t.qZA()(),t.TgZ(25,"div",16)(26,"input",17),t.NdJ("ngModelChange",function(o){return i.searchStr=o}),t.qZA(),t.TgZ(27,"button",18),t.NdJ("click",function(){return i.searchUser()}),t._uU(28,"Search"),t.qZA()(),t.TgZ(29,"table",19)(30,"thead")(31,"tr")(32,"th"),t._uU(33,"ID"),t.qZA(),t.TgZ(34,"th"),t._uU(35,"Profile Photo"),t.qZA(),t.TgZ(36,"th"),t._uU(37,"First Name"),t.qZA(),t.TgZ(38,"th"),t._uU(39,"Last Name"),t.qZA(),t.TgZ(40,"th"),t._uU(41,"Email"),t.qZA(),t.TgZ(42,"th"),t._uU(43,"Phone"),t.qZA(),t.TgZ(44,"th"),t._uU(45,"Aadhaar No"),t.qZA(),t.TgZ(46,"th"),t._uU(47,"Online Status"),t.qZA(),t.TgZ(48,"th"),t._uU(49,"Status"),t.qZA(),t.TgZ(50,"th",20),t._uU(51,"Action"),t.qZA()()(),t.TgZ(52,"tbody"),t.YNc(53,Q,39,21,"tr",21),t.ALo(54,"paginate"),t.qZA()(),t.TgZ(55,"pagination-controls",22),t.NdJ("pageChange",function(o){return i.onPageChange(i.pageNo=o)}),t.qZA()()()()()()()()),2&e&&(t.xp6(18),t.Q6J("ngIf",i.errMessage),t.xp6(1),t.Q6J("ngIf",i.successMessage),t.xp6(7),t.Q6J("ngModel",i.searchStr),t.xp6(27),t.Q6J("ngForOf",t.xi3(54,4,i.users,t.kEZ(7,P,i.limit,i.pageNo,i.totalItems))))},directives:[f.R,_.G,Z.J,g.O5,l.Fj,l.JJ,l.On,g.sg,l.YN,l.Kr,A.LS],pipes:[A._s],styles:['.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:60px;height:34px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.4s}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#2196f3}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #2196f3}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}']}),s})()},{path:"details/:userId",component:(()=>{class s{constructor(e,i){this.activatedRoute=e,this.appService=i}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(u.gz),t.Y36(h.z))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-app-user-details"]],decls:0,vars:0,template:function(e,i){},styles:[""]}),s})()},{path:"activities/:userId",component:(()=>{class s{constructor(e,i,a,o){this.apiService=e,this.appService=i,this.route=a,this.router=o,this.limit=10,this.pageNo=1,this.totalItems=0}ngOnInit(){this.route.params.subscribe(e=>{this.userId=e.userId,this.getActivities()})}getActivities(){this.apiService.getActivitiesByUserId(this.userId).subscribe(e=>{e&&e.success?(this.activities=e.activities,this.totalItems=e.totalCount):e&&!e.success&&(this.activities=[],this.pageNo=1,this.totalItems=0)})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(m.s),t.Y36(h.z),t.Y36(u.gz),t.Y36(u.F0))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-view-activities"]],decls:39,vars:3,consts:[[1,"content-wrapper"],[1,"content-header"],[1,"breadcrumb"],[1,"fa","fa-user"],[1,"content"],[1,"row"],[1,"col-xs-12"],[1,"box"],[1,"box-body"],[2,"height","85vh","overflow","auto","text-align","right"],[1,"form-group"],["class","err-message",4,"ngIf"],["class","success-message",4,"ngIf"],["id","example1",1,"table","table-bordered","table-striped","text-center"],[4,"ngFor","ngForOf"],[1,"err-message"],[1,"success-message"]],template:function(e,i){1&e&&(t._UZ(0,"app-loader")(1,"app-header")(2,"app-left-nav"),t.TgZ(3,"div",0)(4,"section",1)(5,"h1"),t._uU(6," Activities "),t.qZA(),t.TgZ(7,"ol",2)(8,"li"),t._UZ(9,"i",3),t._uU(10," Activities "),t.qZA()()(),t.TgZ(11,"section",4)(12,"div",5)(13,"div",6)(14,"div",7)(15,"div",8)(16,"div",9)(17,"div",10),t.YNc(18,B,2,1,"h3",11),t.YNc(19,k,2,1,"h3",12),t.qZA(),t.TgZ(20,"table",13)(21,"thead")(22,"tr")(23,"th"),t._uU(24,"ID"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Customer Name"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"vehicle Number"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Finance Name"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"Customer Mobile"),t.qZA(),t.TgZ(33,"th"),t._uU(34,"Search Date"),t.qZA(),t.TgZ(35,"th"),t._uU(36,"Status"),t.qZA()()(),t.TgZ(37,"tbody"),t.YNc(38,V,15,7,"tr",14),t.qZA()()()()()()()()()),2&e&&(t.xp6(18),t.Q6J("ngIf",i.errMessage),t.xp6(1),t.Q6J("ngIf",i.successMessage),t.xp6(19),t.Q6J("ngForOf",i.activities))},directives:[f.R,_.G,Z.J,g.O5,g.sg],styles:[""]}),s})()}];let E=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[u.Bz.forChild(z)],u.Bz]}),s})();var $=r(5349);let R=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[g.ez,E,$.m,l.u5,l.UX]]}),s})()}}]);